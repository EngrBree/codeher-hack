{% extends "base.html" %}
{% block title %}Analyst Dashboard{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/analyst.css') }}">
{% endblock %}

{% block content %}
<div class="analyst-dashboard">
    <header class="dashboard-header">
        <div class="user-info">
            <div class="avatar" id="userAvatar">A</div>
            <div class="user-details">
                <h2 id="welcomeMessage">Welcome, Analyst</h2>
                <p id="userRole">Data Analyst | Loading...</p>
            </div>
        </div>
        <nav class="dashboard-nav">
            <ul>
                <li class="active"><a href="#overview"><i class="fas fa-chart-line"></i> Overview</a></li>
                <li><a href="#analytics"><i class="fas fa-chart-bar"></i> Analytics</a></li>
                <li><a href="#reports"><i class="fas fa-file-alt"></i> Reports</a></li>
                <li><a href="#beneficiaries"><i class="fas fa-users"></i> Beneficiaries</a></li>
                <li><a href="#trends"><i class="fas fa-trending-up"></i> Trends</a></li>
                <li><a href="#profile"><i class="fas fa-user-cog"></i> Profile</a></li>
            </ul>
        </nav>
        <button id="logoutBtn" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
    </header>

    <main class="dashboard-content">
        <section id="overview" class="dashboard-section active">
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-value" id="totalBeneficiaries">0</div>
                    <div class="stat-label">Total Beneficiaries</div>
                    <div class="stat-change positive">+12% <i class="fas fa-arrow-up"></i></div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalAssessments">0</div>
                    <div class="stat-label">Total Assessments</div>
                    <div class="stat-change positive">+8% <i class="fas fa-arrow-up"></i></div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="highRiskCases">0</div>
                    <div class="stat-label">High Risk Cases</div>
                    <div class="stat-change negative">+3% <i class="fas fa-arrow-up"></i></div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgVulnerabilityScore">0</div>
                    <div class="stat-label">Avg Vulnerability Score</div>
                    <div class="stat-change neutral">-2% <i class="fas fa-arrow-down"></i></div>
                </div>
            </div>

            <div class="charts-container">
                <div class="chart-card">
                    <h3>Vulnerability Distribution</h3>
                    <canvas id="vulnerabilityChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Monthly Trends</h3>
                    <canvas id="trendsChart"></canvas>
                </div>
            </div>

            <div class="quick-actions">
                <h3>Quick Actions</h3>
                <div class="action-buttons">
                    <button id="generateReportBtn" class="action-btn">
                        <i class="fas fa-file-export"></i> Generate Report
                    </button>
                    <button id="exportDataBtn" class="action-btn">
                        <i class="fas fa-download"></i> Export Data
                    </button>
                    <button id="createAnalysisBtn" class="action-btn">
                        <i class="fas fa-chart-pie"></i> Create Analysis
                    </button>
                </div>
            </div>
        </section>

        <section id="analytics" class="dashboard-section">
            <!-- Analytics content will be loaded by JavaScript -->
        </section>

        <section id="reports" class="dashboard-section">
            <!-- Reports content will be loaded by JavaScript -->
        </section>

        <section id="beneficiaries" class="dashboard-section">
            <!-- Beneficiaries content will be loaded by JavaScript -->
        </section>

        <section id="trends" class="dashboard-section">
            <!-- Trends content will be loaded by JavaScript -->
        </section>

        <section id="profile" class="dashboard-section">
            <!-- Profile content will be loaded by JavaScript -->
        </section>
    </main>
</div>
{% endblock %}

{% block js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/analyst.js') }}"></script>
{% endblock %} 